[global_tags]
  uuid = "ffffffff-ffff-ffff-ffff-ffffffffffff"
  credential_id = "ffffffff-ffff-ffff-ffff-ffffffffffff"
  cloud_service = "openstack"
  type = "vm"

[agent]
  interval = "10s"
  flush_interval = "60s"

  logfile = "/cmp-agent/sites/SITE_CODE/telegraf/log/telegraf.log"
  logfile_rotation_interval = "1d"
  logfile_rotation_max_size = "10MB"
  logfile_rotation_max_archives = 7

  round_interval = true
  metric_batch_size = 1000
  metric_buffer_limit = 20000
  collection_jitter = "0s"
  flush_jitter = "0s"
  precision = "0s"

[[outputs.influxdb]]
  urls = ["http://127.0.0.1:8086"]
  database = "mc-observability"
  username = "mc-agent"
  password = "mc-agent"

[[processors.regex]]

[[inputs.cpu]]
  percpu = true
  totalcpu = true
  collect_cpu_time = false

[[inputs.disk]]
  ignore_fs = ["tmpfs", "devtmpfs", "squashfs", "overlay", "nsfs"]

[[inputs.diskio]]
[[inputs.mem]]
[[inputs.net]]
[[inputs.processes]]
[[inputs.swap]]
[[inputs.system]]
[[inputs.ping]]
  urls = ["127.0.0.1"]
  count = 1
  interval = "10s"

[[inputs.procstat]]
  properties = ["cpu", "limits", "memory", "mmap"]
  tag_with = ["user"]

[[inputs.procstat.filter]]
  name = "ffffffff-ffff-ffff-ffff-ffffffffffff"
